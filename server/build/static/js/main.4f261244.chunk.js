(this["webpackJsonpblog-ui"]=this["webpackJsonpblog-ui"]||[]).push([[0],{18:function(e,t,c){},32:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(22),r=c.n(a),o=(c(32),c(10)),i=c.n(o),l=c(13),u=(c(27),c(11)),j=c(2),d=(c(34),c(35),c(6)),b=c(0);var h=c(4);c(42),c(43),c(44);var f=function(e){var t=e.setResData,c=Object(s.useState)(""),n=Object(j.a)(c,2),a=n[0],r=n[1],o=function(e){if(e.preventDefault(),a){var c=a.replace(/[^A-Za-z0-9]/g," ").trim().split(" ").join("+");fetch("http://localhost:4002/posts/search?name=".concat(c),{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(e.massage&&0==e.success){console.error("no resulst for that search","passing err");var c=new Error("no resulst for that search");t(c)}else t(e)})).catch((function(e){return console.error(e)}))}};return Object(b.jsxs)("form",{className:"Search",onSubmit:o,children:[Object(b.jsx)("input",{type:"text",name:"search",placeholder:"search for question...",value:a,onChange:function(e){r(e.target.value)}}),Object(b.jsx)("button",{type:"submit",onSubmit:o,children:Object(b.jsx)("i",{className:"fas fa-search"})})]})};c(45);var O=function(e){var t=e.addFilters,c=Object(s.useState)(!1),n=Object(j.a)(c,2),a=n[0],r=n[1],o=Object(s.useState)(0),i=Object(j.a)(o,2),u=(i[0],i[1]),d=Object(s.useState)(""),h=Object(j.a)(d,2),f=h[0],O=h[1],p=["html","css","js","react","redux","angular","node","go","dom","vue","php","pc","nosql","sql","database","c#",".net","express","java","oop","git","other","docker","graph","http1.1","http2.0","quic","ip","networking","algorithm","data","server","serverless","crypto","file","tls","tcp","udp","bash","ssh","telnet","security","password","xss","cors","jwt","cookie","md","scss","swift","ddos","limiting","status","c#","c++","linux","windows","mac","python"],x=Object(s.useState)([].concat(p)),m=Object(j.a)(x,2),g=m[0],v=m[1],N=Object(s.useRef)([]),k=Object(s.useState)([]),w=Object(j.a)(k,2),S=(w[0],w[1]),y=Object(s.useState)([]),F=Object(j.a)(y,2),E=F[0],T=F[1];return Object(b.jsxs)("div",{className:"Filter",children:[Object(b.jsx)(b.Fragment,{children:a?Object(b.jsxs)("div",{className:"sideBarOpen",children:[" ",Object(b.jsx)("button",{className:"btn",onClick:function(){t(N.current),console.log("click",N.current,"current filters")},children:"applay filters"}),"  ",Object(b.jsx)("i",{className:"fas fa-times",onClick:function(){S(N.current),r(!1)}})]}):Object(b.jsx)("button",{className:"btn",onClick:function(){S(N.current),r(!0)},children:"show filters"})}),Object(b.jsxs)("div",{className:"wraper",children:[a&&Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[" ",Object(b.jsx)("input",{value:f,onChange:function(e){O(e.target.value),v(Object(l.a)(p.filter((function(t){return t.includes(e.target.value)}))))},placeholder:"search for filter",className:"searchForFilters"})]}),a&&Object(b.jsxs)("div",{className:"currentFilters",children:[Object(b.jsx)("p",{children:"current filters :"}),Object(b.jsx)("ul",{children:E&&E.map((function(e,t){return Object(b.jsx)("li",{className:"singleFilter "+e,onClick:function(e){return function(e){var t=E.indexOf(e.target.className.split(" ")[1]);-1!==t&&(E.splice(t,1),console.log("in removeTag ::","starting removing filters",N.current),N.current.splice(t,1),console.log("removing removed",N.current)),T(Object(l.a)(E))}(e)},children:e},t)}))})]}),a&&Object(b.jsxs)("div",{className:"allFiltersTags",children:[Object(b.jsx)("p",{children:"all filters :"}),Object(b.jsx)("ul",{children:g&&g.map((function(e,t){return Object(b.jsx)("li",{className:"singleFilter "+e,onClick:function(t){return function(e,t){if(u(Math.random()),N.current.includes(e)){console.log("starting removing filters",N.current);var c=N.current.indexOf(e);N.current.splice(c,1),console.log("removing removed",N.current);var s=E.indexOf(t.target.className.split(" ")[1]);-1!==s&&E.splice(s,1),T(Object(l.a)(E))}else N.current.push(e),T([].concat(Object(l.a)(E),[t.target.className.split(" ")[1]]))}(e,t)},children:e},t)}))})]})]})]})};var p=function(e){var t=e.sendDataToIndexThenToMain,c=e.setPopup,n=Object(s.useState)(!1),a=Object(j.a)(n,2),r=a[0],o=(a[1],Object(s.useState)([])),i=Object(j.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)([]),p=Object(j.a)(d,2),x=p[0],m=p[1],g=Object(s.useState)(null),v=Object(j.a)(g,2),N=v[0],k=v[1],w=Object(s.useRef)("");return Object(s.useEffect)((function(){if(console.log("useEffect is called"),w.current=l.map((function(e,t,c){return c.length==t+1?"tag=".concat(e):"tag=".concat(e,"&")})).join(""),console.log("filters in effect",l,w.current),!w.current||0===l.length)return console.error("bad filters","returning"),function(){return console.log("returning , last else")};console.log("useEffect is fetching","http://localhost:4002/posts/filter?".concat(w.current)),fetch("http://localhost:4002/posts/filter?".concat(w.current),{method:"GET"}).then((function(e){if(e.ok||200==e.status)return e.json();throw new Error("fetch failed")})).then((function(e){return t(e)})).catch((function(e){return console.error(e)}))}),[JSON.stringify(l)]),Object(s.useEffect)((function(){x instanceof Error&&(console.log("err in use effect"),k(Object(b.jsx)(h.a,{to:"/posts/404"})))}),[x]),Object(b.jsxs)("div",{className:"Header",children:[Object(b.jsxs)("div",{className:"authLinks",children:[Object(b.jsx)("img",{src:"./favicon.ico",alt:"logo"}),"       ",!r&&Object(b.jsx)("div",{className:"link",onClick:function(){return c(!0)},children:"Sing up"})]}),Object(b.jsxs)("div",{className:"wraperHeader",style:{display:"flex",width:"auto"},children:[Object(b.jsx)(f,{setResData:m}),Object(b.jsx)(O,{addFilters:u}),N]})]})};c(18);var x=function(e){return Object(b.jsx)("div",{className:"tagsWraper",children:e.all&&e.all.map((function(t,c){return Object(b.jsx)(d.b,{to:"/posts/filter?tag=".concat(t),className:"tag",style:{backgroundColor:"hsl( ".concat(e.colors[c]," , 100%, 50%)")},children:t},c)}))})};var m=function(e){var t=Object(s.useState)(!1),c=Object(j.a)(t,2),n=c[0],a=c[1],r=Object(s.useState)(e.data.likes),o=Object(j.a)(r,2),l=o[0],h=o[1],f=Object(s.useState)(!1),O=Object(j.a)(f,2),p=(O[0],O[1]);Object(s.useEffect)((function(){e.data.tags&&e.data.tags.forEach((function(){N.current.push(359*Math.random()),p(!0)}))}),[]);var m="http://localhost:4002/action/like";function g(e,t,c,s){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(i.a.mark((function e(t,c,s,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({postId:s,postType:n,actionType:c})});case 3:if(a=e.sent,console.log(a.status,"data",a),403!==a.status||a.ok){e.next=9;break}return e.abrupt("return",{success:!1,redirect:!0,authorized:!1});case 9:if(400!=a.status||a.ok){e.next=11;break}throw new Error("invalid request");case 11:return e.next=13,a.json();case 13:return r=e.sent,console.log("data",r),e.abrupt("return",r);case 18:throw e.prev=18,e.t0=e.catch(0),console.log("err",e.t0,"sended","failed to",c),new Error("failed to"+c);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}var N=Object(s.useRef)([]),k=function(){var t=Object(u.a)(i.a.mark((function t(){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(!n),t.prev=1,n){t.next=11;break}return console.log("like"),t.next=6,g(m,"like",e.data._id,"post");case 6:c=t.sent,console.log(c,"res in if (like)"),1==c.success?(console.log("res is good"),h(l-1)):0==c.success&&0==c.authorized&&1==c.redirect?(a(!1),console.log("res is bad , unauthorized"),e.setPopup(!0)):(a(!1),console.log("res is just bad")),t.next=17;break;case 11:return console.log("dislike"),t.next=14,g(m,"dislike",e.data._id,"post");case 14:s=t.sent,console.log(s,"res in else (!like) !!!!"),1==s.success?(console.log("res is good"),h(l+1)):0==s.success&&0==s.authorized&&1==s.redirect?(a(!0),console.log("res is bad , unauthorized"),e.setPopup(!0)):(console.log("res is just bad"),a(!0));case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),console.log("err from catch ::",t.t0);case 22:case"end":return t.stop()}}),t,null,[[1,19]])})));return function(){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"singlePost",children:["    ",Object(b.jsxs)(d.b,{className:"link",to:"/posts/".concat(e.parsedName),children:["  ",e.data.name]}),Object(b.jsx)(x,{colors:N.current,all:e.data.tags}),Object(b.jsxs)("div",{className:"likes",onClick:k,children:[Object(b.jsx)("p",{children:l}),n?Object(b.jsx)("i",{className:"fas fa-heart",style:{color:"red"}}):Object(b.jsx)("i",{className:"far fa-heart"})]}),Object(b.jsxs)("div",{className:"comment",children:[Object(b.jsx)("span",{children:"".concat(12," comments")})," ",Object(b.jsx)("i",{className:"fas fa-share"}),Object(b.jsx)("span",{children:function(e){var t=e.split("-");return t[2]=t[2].slice(0,2),t.join("_")}(e.data.date)})]})]})};c(46);var g=function(e){return Object(b.jsx)("div",{className:"Footer",children:e.data&&e.data.map((function(e){var t="posts/id?_id="+e._id;return Object(b.jsx)(d.b,{className:"link",to:"/".concat(t),children:e.name},e._id)}))})},v=(c(47),c(48),c(49),c(24)),N=c.n(v),k=(c(25),c(26),function(e){var t=e.setRedirectToFinish,c=e.setUser,n=Object(s.useState)(""),a=Object(j.a)(n,2),r=a[0],o=a[1],i=Object(s.useState)(""),l=Object(j.a)(i,2),u=l[0],d=l[1],h=Object(s.useState)(!1),f=Object(j.a)(h,2),O=f[0],p=f[1],x=Object(s.useState)(!1),m=Object(j.a)(x,2),g=m[0],v=m[1],k=Object(s.useRef)(null),w=Object(s.useState)(!0),S=Object(j.a)(w,2),y=S[0],F=S[1];function E(e){e.preventDefault(),v(!0),r&&u?fetch("http://localhost:4002/auth/login",{method:"POST",redirect:"follow",credentials:"include",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({email:r,password:u})}).then((function(e){if(console.log("res",e),v(!1),e.ok)return p(!1),e.json();throw new Error("error with raw response")})).then((function(e){if(!0!==e.success)throw t(!1),new Error("error with response , login not accepted");console.log(e,"data"),c(e.username),p(!1),t(!0)})).catch((function(e){p(!0),console.log(e)})):(p(!0),v(!1))}return g?Object(b.jsx)(N.a,{type:"Puff",color:"#00BFFF",width:50,height:50}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"LoginForm",children:Object(b.jsxs)("form",{className:"formLogin",onSubmit:E,children:[Object(b.jsx)("div",{className:"wraper1",children:Object(b.jsx)("input",{className:"emailInput",value:r,onChange:function(e){o(e.target.value)},name:"email",type:"text",placeholder:"enter your email..."})}),Object(b.jsxs)("div",{className:"wraper2",children:[Object(b.jsx)("input",{ref:k,className:"passwordInput",value:u,onChange:function(e){d(e.target.value)},name:"password",type:"password",placeholder:"enter your password..."}),Object(b.jsx)("i",{className:"fas fa-eye-slash eye",onClick:function(){F(!y),k.current.type=y?"text":"password"}})]}),O&&Object(b.jsx)("p",{className:"loginError",children:"invalid credentials , please try again"}),Object(b.jsx)("button",{className:"submitButton",type:"submit",onClick:E,children:"submit"})]})})})}),w=(c(68),function(){return Object(b.jsx)("div",{className:"RegisterForm",children:Object(b.jsx)("h1",{children:"from register"})})}),S=(c(69),function(){return Object(b.jsx)("div",{className:"ResetPassword",children:Object(b.jsx)("h1",{children:"reset password here"})})}),y=(c(70),function(e){var t=e.user,c="Welcome ".concat(t," , you have succefully logged in :)");return Object(b.jsx)("div",{className:"Finish",children:Object(b.jsx)("h1",{children:c})})});var F=function(e){var t=e.setPopup,c=Object(s.useState)(!1),n=Object(j.a)(c,2),a=n[0],r=n[1],o=Object(s.useState)(!1),i=Object(j.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)(!1),h=Object(j.a)(d,2),f=h[0],O=h[1],p=Object(s.useState)(""),x=Object(j.a)(p,2),m=x[0],g=x[1],v=function(){u(!1),r(!0)};return Object(b.jsx)("div",{className:"Popup",children:Object(b.jsxs)("div",{className:"real",children:[Object(b.jsx)("h2",{className:"btnX",onClick:function(){t(!1)},children:"X"}),f?Object(b.jsx)(y,{user:m}):l?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(S,{}),Object(b.jsx)("button",{onClick:v,children:"go back"})]}):a?Object(b.jsxs)("div",{children:[Object(b.jsx)(k,{setRedirectToFinish:O,setUser:g}),Object(b.jsx)("p",{className:"link",onClick:function(){return r(!a)},children:"Dont have account , click here to register"}),Object(b.jsx)("p",{className:"linkToResetPassword",onClick:function(){return u(!0)},children:"forget your password?"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(w,{}),Object(b.jsx)("p",{className:"link",onClick:function(){return r(!a)},children:"Alredy have account, click here to login"})]})]})})};var E=function(e){var t=e.dataFromDashboard,c=e.setPopup,n=e.popup,a=Object(s.useState)(),r=Object(j.a)(a,2),o=r[0],l=r[1],d=Object(s.useState)(!1),f=Object(j.a)(d,2),O=f[0],p=f[1];return Object(s.useEffect)((function(){try{Object(u.a)(i.a.mark((function e(){var t,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:4002/posts/all");case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,l(c),p(!1);case 8:case"end":return e.stop()}}),e)})))()}catch(e){console.log(e),p(!0)}}),[]),Object(b.jsxs)(b.Fragment,{children:[n&&Object(b.jsx)(F,{setPopup:c}),O?Object(b.jsx)(h.a,{to:"/posts/404"}):Object(b.jsxs)("div",{className:"MainPosts",children:[o&&o.map((function(e,t){var s="id?_id="+e._id;return Object(b.jsx)(m,{data:e,parsedName:s,setPopup:c},t)})),0!==t.length&&t.map((function(e,t){var s="id?_id="+e._id;return Object(b.jsx)(m,{data:e,parsedName:s,setPopup:c},t)}))]}),Object(b.jsx)(g,{data:o})]})};c(71);var T=function(e){var t=e.sendDataToIndexThenToMain,c=Object(s.useState)([]),n=Object(j.a)(c,2),a=(n[0],n[1],Object(s.useState)([])),r=Object(j.a)(a,2),o=r[0],i=(r[1],Object(s.useRef)(""));return Object(s.useEffect)((function(){if(console.log("useEffect is called"),i.current=o.map((function(e,t,c){return c.length==t+1?"tag=".concat(e):"tag=".concat(e,"&")})).join(""),console.log("filters in effect",o,i.current),!i.current||0===o.length)return console.error("bad filters","returning"),function(){return console.log("returning , last else")};fetch("http://localhost:4002/posts/filter?".concat(i.current),{method:"GET"}).then((function(e){if(e.ok||200==e.status)return e.json();throw new Error("fetch failed")})).then((function(e){return t(e)})).catch((function(e){return console.error(e)}))}),[JSON.stringify(o)]),Object(b.jsx)(b.Fragment,{})},C=(c(72),function(e){e.element;var t=Object(s.useState)({}),c=Object(j.a)(t,2);c[0],c[1];return Object(s.useEffect)((function(){}),[]),Object(b.jsx)("div",{className:"singleComment"})}),P=function(e){var t=e.data,c=Object(s.useState)([]),n=Object(j.a)(c,2),a=n[0],r=(n[1],Object(s.useState)(t[0].likes)),o=Object(j.a)(r,2),i=o[0],l=o[1],u=Object(s.useState)(!1),d=Object(j.a)(u,2),h=d[0],f=d[1];Object(s.useEffect)((function(){}),[]);return Object(b.jsxs)("div",{className:"OneFullPost",children:[Object(b.jsxs)("div",{className:"OneFullPostAuthor",children:[Object(b.jsx)("p",{children:JSON.stringify(t)}),Object(b.jsx)("h1",{children:t[0].name}),Object(b.jsxs)("div",{className:"likes",onClick:function(){f(!h),l(h?i-1:i+1)},children:[Object(b.jsx)("p",{children:i}),h?Object(b.jsx)("i",{className:"fas fa-heart",style:{color:"red"}}):Object(b.jsx)("i",{className:"far fa-heart"}),Object(b.jsx)("h2",{children:t[0].text}),"   ",Object(b.jsx)("p",{children:t[0].author+" "+t[0].date})]})]}),Object(b.jsx)("div",{className:"allComments",children:a&&a.map((function(e,t){return Object(b.jsx)(C,{element:e},t)}))})]})},D=function(){var e=Object(s.useState)(null),t=Object(j.a)(e,2),c=t[0],n=t[1],a=Object(h.g)();console.log("pathname location",a.pathname),console.log("all location",a);var r=Object(h.h)().variable;return console.log("current variable",r),Object(s.useEffect)((function(){switch(r){case"id":if(console.log("swith id"),"?_id"===a.search.split("=")[0]){var e="http://localhost:4002"+a.pathname+a.search;fetch(e,{method:"GET"}).then((function(e){if(console.log(e),e.ok)return console.log("good response",e.ok,e.status),e.json();throw console.log("bad response",e.status),new Error("bad response ".concat(e.status))})).then((function(e){console.log(e),n(Object(b.jsx)(P,{data:e}))})).catch((function(e){console.log(e),n(Object(b.jsx)(h.a,{to:"/posts/404"}))}))}else n(Object(b.jsx)(h.a,{to:"/posts/404"}));break;case"search":console.log("swith search");break;case"filter":console.log("swith filter");break;default:console.log("non of the above"),n(Object(b.jsx)(h.a,{to:"/posts/404"}))}}),[r]),c};var R=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(!1),r=Object(j.a)(a,2),o=r[0],i=r[1];return c&&console.log(c,c.length),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(p,{sendDataToIndexThenToMain:n,setPopup:i,popup:o}),Object(b.jsx)(T,{sendDataToIndexThenToMain:n}),Object(b.jsxs)(h.d,{children:[Object(b.jsxs)(h.b,{exact:!0,path:"/",children:[" ",Object(b.jsx)(E,{dataFromDashboard:c,setPopup:i,popup:o})]}),Object(b.jsxs)(h.b,{exact:!0,path:"/posts",children:[" ",Object(b.jsx)(E,{dataFromDashboard:c,setPopup:i,popup:o})]}),Object(b.jsxs)(h.b,{exact:!0,path:"/posts/all",children:[" ",Object(b.jsx)(E,{dataFromDashboard:c})]}),Object(b.jsxs)(h.b,{path:"/posts/:variable",children:[" ",Object(b.jsx)(D,{})," "]}),Object(b.jsx)(h.b,{exact:!0,path:"/posts/404",children:Object(b.jsx)("h1",{children:"404 item not found"})}),Object(b.jsx)(h.b,{path:"/",children:Object(b.jsx)("h1",{children:"404 that route dont exist"})})]})]})};c(73);r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsxs)(d.a,{children:[" ",Object(b.jsx)(R,{})]})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.4f261244.chunk.js.map